<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>SQL Console</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        :root{
          --pg-blue:#336791;          /* primary */
          --pg-blue-700:#2b5780;      /* darker hover */
          --pg-blue-050:#f2f6fb;      /* subtle bg */
          --ink:#0f172a;              /* near-black text */
          --muted:#475569;            /* secondary text */
          --card:#ffffff;             /* surfaces */
          --border:#e2e8f0;           /* light borders */
          --focus:#82b1e8;            /* focus ring */
        }
        html,body{height:100%;}
        body{
          margin:0;
          font-family:"Open Sans", system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Apple Color Emoji", "Segoe UI Emoji";
          color:var(--ink);
          background:linear-gradient(180deg, var(--pg-blue-050), #fff 40%);
        }
        /* Header */
        .topbar{
          position:sticky; top:0; z-index:10;
          backdrop-filter:saturate(1.2) blur(6px);
          background:color-mix(in srgb, var(--card) 85%, transparent);
          border-bottom:1px solid var(--border);
        }
        .wrap{max-width:1100px; margin:0 auto; padding:0 20px;}
        .nav{
          display:flex; align-items:center; justify-content:space-between; height:64px;
        }
        .brand{display:flex; align-items:center; gap:10px; font-weight:700; color:var(--pg-blue); text-decoration:none;}
        .brand .logo{width:28px; height:28px; border-radius:6px; background:var(--pg-blue); position:relative; box-shadow:0 1px 0 rgba(0,0,0,.04) inset;
        }
        .brand .logo:after{content:""; position:absolute; inset:6px; border:2px solid #fff; border-top-left-radius:10px; border-bottom-right-radius:10px; opacity:.85;}
        .nav a{color:var(--muted); text-decoration:none; margin-left:18px; font-weight:600;}
        .nav a:hover{color:var(--pg-blue);}
        /* Hero */
        .hero{padding:56px 0 24px; text-align:left;}
        .hero h1{margin:0 0 8px; font-size:34px; line-height:1.2; letter-spacing:-0.01em;}
        .hero p{margin:0; color:var(--muted); font-size:16px;}
        /* Card */
        .card{margin:24px 0 48px; background:var(--card); border:1px solid var(--border); border-radius:14px; box-shadow:0 6px 24px rgba(15,23,42,.05);
          overflow:hidden;
        }
        .card .card-head{display:flex; align-items:center; justify-content:space-between; padding:14px 16px; background:var(--pg-blue-050); border-bottom:1px solid var(--border);}
        .card .card-head h2{margin:0; font-size:16px; color:var(--muted); font-weight:700; letter-spacing:.02em;}
        .toolbar{display:flex; gap:8px; align-items:center;}
        .btn{appearance:none; border:1px solid var(--pg-blue); background:var(--pg-blue); color:#fff; font-weight:700; padding:10px 14px; border-radius:10px; cursor:pointer; transition:transform .02s ease, box-shadow .2s ease, background .2s ease;}
        .btn:hover{background:var(--pg-blue-700);}
        .btn:active{transform:translateY(1px);}
        .btn.secondary{background:#fff; color:var(--pg-blue); border-color:var(--pg-blue);}
        .btn.secondary:hover{background:color-mix(in srgb, var(--pg-blue) 8%, #fff);}
        .kbd{font:600 12px/1.6 "Open Sans"; color:var(--muted); border:1px solid var(--border); border-bottom-width:2px; background:#fff; border-radius:6px; padding:2px 6px;}

        .editor{padding:16px;}
        label{display:block; font-weight:700; font-size:13px; color:var(--muted); margin-bottom:8px; letter-spacing:.02em;}
        textarea{
          width:100%; min-height:230px; resize:vertical; padding:14px 12px; font: 14px/1.5 ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace; color:var(--ink);
          border:1px solid var(--border); border-radius:10px; background:#fff; box-shadow:0 1px 0 rgba(0,0,0,.02) inset;
        }
        textarea:focus{outline:none; border-color:var(--focus); box-shadow:0 0 0 3px color-mix(in srgb, var(--focus) 35%, transparent);}

        .footnote{color:var(--muted); font-size:13px; margin-top:12px;}

        .output{border-top:1px solid var(--border); padding:16px; background:#fff; font: 13px/1.5 ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace; white-space:pre-wrap;}
        .muted{color:#64748b;}

        /* Footer */
        footer{border-top:1px solid var(--border); padding:24px 0; color:var(--muted);}

        @media (max-width:680px){
          .hero h1{font-size:28px;}
          .nav a{margin-left:12px;}
        }
    </style>
</head>
<body>
<header class="topbar">
    <div class="wrap nav">
        <a class="brand" href="#" aria-label="Home">
            <span class="logo" aria-hidden="true"></span>
            <span>SQL Console</span>
        </a>
        <nav>
            <a href="https://github.com/ggreen/spring-modern-data-architecture/tree/main/applications/jdbc-sql-console-app">Git Repo</a>
        </nav>
    </div>
</header>

<main class="wrap">
    <section class="hero" aria-labelledby="title">
        <h1 id="title">SQL Playground</h1>
        <p>Type a SQL statement below and press <span class="kbd">Ctrl/⌘ + Enter</span> to execute.</p>
    </section>

    <section class="card" aria-labelledby="editor-title">
        <div class="card-head">
            <h2 id="editor-title">Query Editor</h2>
            <div class="toolbar">
                <span class="kbd" title="Keyboard shortcut">Ctrl/⌘ + Enter</span>
                <button id="clearBtn" class="btn secondary" type="button">Clear</button>
                <button id="execBtn" class="btn" type="button">Execute SQL</button>
            </div>
        </div>
        <div class="editor">
            <label for="sql">SQL</label>
            <textarea id="sql" placeholder="e.g. --  SELECT * from ..."></textarea>
            <div class="footnote">This page only handles UI. Hook the <code>runSQL()</code> function to your backend to actually execute queries.</div>
        </div>
        <div id="output" class="output" aria-live="polite">
            <span class="muted">Results will appear here…</span>
        </div>
    </section>
</main>

<footer>
    <div class="wrap"> This application is based on Spring Data JDBC</div>
</footer>

<script>
    const textarea = document.getElementById('sql');
    const execBtn = document.getElementById('execBtn');
    const clearBtn = document.getElementById('clearBtn');
    const output = document.getElementById('output');

    function renderMessage(msg){
      output.textContent = msg;
    }

    function runSQL(sql){
      if(!sql || !sql.trim()){
        renderMessage('Please enter a SQL statement.');
        return;
      }
      // Demo behavior: echo the SQL and simulate a response
      const timestamp = new Date().toLocaleString();
      const demo = [
        `-- Executed at ${timestamp}`,
        `Statement:`,
        sql.trim(),
        '',
        '-- Demo result (replace with real backend call):',
        'OK  (0.012s)'
      ].join('\n');
      //renderMessage(demo);

      // TODO: Replace this with a real call, e.g.:
      fetch('/sql', {method:'POST', headers:{'Content-Type':'application/json'}, body:  sql })
         .then(r => r.json())
         .then(data => output.textContent = JSON.stringify(data, null, 2))
         .catch(err => output.textContent = 'Error: ' + err.message);
    }

    execBtn.addEventListener('click', () => runSQL(textarea.value));
    clearBtn.addEventListener('click', () => { textarea.value=''; renderMessage('Cleared.'); textarea.focus(); });

    // Keyboard shortcut: Ctrl/⌘ + Enter
    textarea.addEventListener('keydown', (e) => {
      if ((e.ctrlKey || e.metaKey) && e.key === 'Enter') {
        e.preventDefault();
        runSQL(textarea.value);
      }
    });

    // Focus textarea on load for quick typing
    window.addEventListener('load', ()=> textarea.focus());
</script>
</body>
</html>