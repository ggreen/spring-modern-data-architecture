<!DOCTYPE html>
<html>
<head>
    <title>Retail Source Application</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" href="styles/styles.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
    <style>
        .dataTable {
          font-family: Arial, Helvetica, sans-serif;
          border-collapse: collapse;
          width: 100%;
        }

        .dataTable td, .dataTable th {
          border: 1px solid #ddd;
          padding: 8px;
        }

        .dataTable tr:nth-child(even){background-color: #f2f2f2;}

        .dataTable tr:hover {background-color: #ddd;}

        .dataTable th {
          padding-top: 12px;
          padding-bottom: 12px;
          text-align: left;
          background-color: #04AA6D;
          color: white;
        }
    </style>
    <script>
        $(document).ready(function(){
          $("#loadButton").click(function(){

           var productCsv = $('#productsCsv').val();
           //alert(productCsv);
            $.ajax({
              url:"products/csv",
              type:"POST",
              data:productCsv,
              contentType:"text/csv; charset=utf-8",
              dataType:"text",
              success: function(result,status,xhr){
                $("#status").html(status);
              },
              error: function(xhr, ajaxOptions, thrownError) {
                 alert(xhr.status);
                    alert(thrownError);
              }
            });
          });
          //----------------------------
          // Customer Reviews
          $("#customerReviewButton").click(function(){

           var customerReviewsCsv = $('#customerReviewsCsv').val();
            $.ajax({
              url:"product/customer/reviews/csv",
              type:"POST",
              data:customerReviewsCsv,
              contentType:"text/csv; charset=utf-8",
              dataType:"text",
              success: function(result,status,xhr){
                $("#status").html(status);
              },
              error: function(xhr, ajaxOptions, thrownError) {
                 alert(xhr.status);
                    alert(thrownError);
              }
            });
          });
           //----------------------------
          // Customer Product Review
          $("#customerProductReviewContextButton").click(function(){

           $("#status").html("Processing......");
           var customerProductReviewContext = $('#customerProductReviewContext').val();
            $.ajax({
              url:"product/customer/reviews/context",
              type:"POST",
              data: customerProductReviewContext,
              contentType:"text/plain; charset=utf-8",
              dataType:"text",
              success: function(result,status,xhr){
                $("#status").html(status);
              },
              error: function(xhr, ajaxOptions, thrownError) {
                 alert(xhr.status);
                    alert(thrownError);
              }
            });
          });
          //----------------------------
          //Submit Customer Orders
          $("#orderButton").click(function(){

           var ordersCsv = $('#ordersCsv').val();

           //clear status
           $("#status").html("");

            $.ajax({
              url:"orders/csv",
              type:"POST",
              data:ordersCsv,
              contentType:"text/csv; charset=utf-8",
              dataType:"text",
              success: function(result,status,xhr){
                $("#status").html(status);
              },
              error: function(xhr, ajaxOptions, thrownError) {
                 alert(xhr.status);
                    alert(thrownError);
              }
            });
          });

        });
    </script>
</head>
    <body>
    <h1>Retail Source</h1>

    <ul>
        <li><a href="/swagger-ui.html">Swagger-UI</a></li>
    </ul>

    <div id="status"></div>
    <h2>Products</h2>
    <p>
        <div>&quot;id&quot;,&quot;name&quot;</div>
    <textarea id="productsCsv" rows="5" cols="50">"sku1", "Peanut butter"
"sku2", "Jelly"
"sku3", "Bread"
"sku4", "Milk"
"sku5", "Meatloaf"
    </textarea>
    </p>
    <button id="loadButton">Load Product</button>
    <br/>
    <div>
        <hr/>
        <h2>Orders</h2>
        <div>&quot;id&quot;,&quot;user&quot;,&quot;id&quot;,&quot;quantity&quot;</div>
<textarea id="ordersCsv" rows="5" cols="50">"1","nyla","sku1","1"
"1","nyla","sku2","5"
"2","nyla","sku1","5"
"2","nyla","sku2","5"
"3","nyla","sku1","5"
"3","nyla","sku2","5"
"4","nyla","sku1","5"
"4","nyla","sku2","5"
"5","nyla","sku1","5"
"5","nyla","sku2","5"
"6","nyla","sku1","5"
"6","nyla","sku2","5"
"7","nyla","sku1","5"
"7","nyla","sku2","5"
"8","nyla","sku1","5"
"8","nyla","sku2","5"
</textarea>
    </div>
    <button id="orderButton">Submit Order</button>

    <hr/>
    <h2>Customer Reviews</h2>
    <p>
        <div>"userId",&quot;sku&quot;,&quot;review&quot;</div>
        <textarea id="customerReviewsCsv" rows="5" cols="50">"nyla","sku1","I Love Peanut Butter"
"nyla","sku2","I Love Jelly"
"son","sku5","I love that this meatloaf needs more Peanut butter - love son"
        </textarea>
    </p>
    <button id="customerReviewButton">Submit Reviews</button>
    <hr/>
    <h2>Customer Product Review Context</h2>

    <p>
    <div>Uses Retrieval Augmented Generation (RAG) with the vector database to customizing the responses</div>
       <textarea id="customerProductReviewContext" rows="5"
                 cols="50">I love that this meatloaf needs more Peanut butter - love son is a NEGATIVE Sentiment
        </textarea>
    </p>
    <button id="customerProductReviewContextButton">Submit Review Context</button>
    </body>
</html>
